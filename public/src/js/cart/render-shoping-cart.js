import { deleteProduct } from "./delete-product";

export function renderToLocalStorage(data) {
    let productsInLocalStorage = JSON.parse(localStorage.getItem('productos')) || [];
    if (data) {
        const productData = data;
        productsInLocalStorage.push(productData);
    }
    localStorage.setItem('productos', JSON.stringify(productsInLocalStorage));
    if (productsInLocalStorage.length > 0) {
        renderProductsUI(productsInLocalStorage);
    } else {
        const shoppingList = document.querySelector('#productList');
        shoppingList.innerHTML = `
        <div class="shoping-cart__aside--empty-cart">
            <i class="shoping-cart__aside--i">
                <svg width="110" height="98" viewBox="0 0 110 98" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1571_3803)">
                    <path d="M70.17 98H32.1948C29.0807 98 26.3064 95.9062 25.4497 92.91L25.4399 92.8766L13.0697 44.5853C12.4665 42.4522 12.885 40.2149 14.2191 38.4454C15.5571 36.6701 17.5985 35.6517 19.8207 35.6517H24.8407C25.2061 29.388 26.9449 16.5853 34.8335 8.57773C39.2523 4.09128 44.8696 1.8166 51.5282 1.8166H51.599C58.3106 1.83233 63.9201 4.14436 68.2681 8.68782C75.9327 16.6974 77.3886 29.4077 77.6165 35.6537H83.3557C85.5228 35.6537 87.5328 36.6308 88.8727 38.3373C90.2127 40.0438 90.6862 42.2281 90.1734 44.3356L90.1636 44.371L76.9839 92.6623C76.2098 95.8099 73.4119 98.0059 70.17 98.0059V98ZM27.9096 92.2238C28.4598 94.121 30.2183 95.4442 32.1929 95.4442H70.1681C72.2311 95.4442 74.0131 94.0424 74.5024 92.0371L74.5122 92.0017L87.6919 43.7124C88.0122 42.3775 87.7096 40.9954 86.8608 39.916C86.0101 38.8327 84.731 38.2115 83.3537 38.2115H75.1075L75.0898 36.9513C75.0132 31.6293 74.0151 18.396 66.4193 10.4572C62.5703 6.43673 57.5817 4.39011 51.5891 4.37438H51.5263C45.5769 4.37438 40.5726 6.39348 36.6529 10.3747C28.615 18.5356 27.4892 32.801 27.3359 36.9788L27.2907 38.2115H19.8207C18.408 38.2115 17.1093 38.8583 16.2585 39.9868C15.4078 41.1153 15.1425 42.5426 15.5315 43.9011L15.5414 43.9346L27.9116 92.2238H27.9096ZM51.5931 88.6555C49.3788 88.6555 47.3374 87.413 45.8402 85.1541C44.4511 83.0583 43.6848 80.296 43.6848 77.3765C43.6848 74.457 44.4511 71.6947 45.8402 69.5989C47.3374 67.3419 49.3807 66.0975 51.5931 66.0975C53.8054 66.0975 55.8488 67.34 57.3459 69.5989C58.735 71.6947 59.5013 74.457 59.5013 77.3765C59.5013 80.296 58.735 83.0583 57.3459 85.1541C55.8488 87.411 53.8054 88.6555 51.5931 88.6555ZM51.5931 68.6572C48.6911 68.6572 46.241 72.6502 46.241 77.3785C46.241 82.1067 48.6931 86.0997 51.5931 86.0997C54.4931 86.0997 56.9451 82.1067 56.9451 77.3785C56.9451 72.6502 54.4931 68.6572 51.5931 68.6572ZM67.9695 66.0267C64.6215 66.0267 61.8983 63.3018 61.8983 59.9517C61.8983 56.6016 64.6215 53.8767 67.9695 53.8767C71.3175 53.8767 74.0406 56.6016 74.0406 59.9517C74.0406 63.3018 71.3175 66.0267 67.9695 66.0267ZM67.9695 56.4345C66.0322 56.4345 64.4545 58.0132 64.4545 59.9517C64.4545 61.8902 66.0322 63.4689 67.9695 63.4689C69.9067 63.4689 71.4845 61.8902 71.4845 59.9517C71.4845 58.0132 69.9067 56.4345 67.9695 56.4345ZM33.4601 66.0267C30.1122 66.0267 27.389 63.3018 27.389 59.9517C27.389 56.6016 30.1122 53.8767 33.4601 53.8767C36.8081 53.8767 39.5313 56.6016 39.5313 59.9517C39.5313 63.3018 36.8081 66.0267 33.4601 66.0267ZM33.4601 56.4345C31.5229 56.4345 29.9452 58.0132 29.9452 59.9517C29.9452 61.8902 31.5229 63.4689 33.4601 63.4689C35.3974 63.4689 36.9751 61.8902 36.9751 59.9517C36.9751 58.0132 35.3974 56.4345 33.4601 56.4345ZM72.3922 38.2095H30.0061L30.065 36.8746C30.289 31.8514 31.5661 19.3967 38.598 12.2699C42.0364 8.78612 46.2646 7.09142 51.5243 7.09142H51.5852C56.8763 7.10321 61.0829 8.81561 64.4466 12.323C71.3017 19.4754 72.2684 31.8966 72.3667 36.906L72.3922 38.2095ZM32.6978 35.6517H69.7673C69.5452 30.9117 68.388 20.1281 62.6037 14.0944C59.7469 11.1139 56.1415 9.661 51.5793 9.64921H51.5282C46.9857 9.64921 43.3528 11.0942 40.4194 14.0668C34.4818 20.0848 33.0456 30.8802 32.6998 35.6517H32.6978Z" fill="#FF9300"/>
                    <path d="M109.819 19.3417C109.605 18.3705 109.21 17.4504 108.646 16.603C108.067 15.734 107.312 14.9987 106.403 14.4188C105.514 13.8506 104.558 13.4751 103.562 13.3021C103.108 13.2234 102.65 13.1841 102.2 13.1841C101.673 13.1841 101.141 13.2392 100.622 13.3473C100.119 13.4515 99.628 13.6048 99.1545 13.8054L99.3392 13.5242C99.6005 13.1291 99.6909 12.6454 99.5927 12.1814C99.4944 11.7175 99.2135 11.3125 98.8146 11.0588L95.557 8.97683C95.2701 8.79399 94.9401 8.69765 94.6041 8.69765C94.4724 8.69765 94.3408 8.71338 94.2092 8.74287C93.7474 8.84904 93.3466 9.13608 93.0991 9.53911L86.631 20.0514C86.4758 20.303 86.3913 20.5803 86.3717 20.8575C86.2636 20.9164 86.1595 20.9794 86.0553 21.0501C85.6388 21.3332 85.2871 21.695 85.0101 22.1295C84.7252 22.5758 84.5444 23.0555 84.4757 23.5529C84.4108 24.011 84.4305 24.473 84.5326 24.9251C84.6387 25.399 84.8333 25.8393 85.1123 26.2365C85.3912 26.6336 85.7488 26.9718 86.1732 27.2431C86.5819 27.5046 87.0299 27.6835 87.5034 27.7739C87.7352 27.8191 87.969 27.8408 88.1989 27.8408C88.4563 27.8408 88.7137 27.8132 88.9652 27.7582C89.4171 27.6599 89.8454 27.4829 90.2325 27.2333C90.6549 26.96 91.0144 26.5963 91.2974 26.15C91.5744 25.7155 91.7571 25.2436 91.8377 24.7482C91.8554 24.6401 91.8691 24.53 91.877 24.4219C92.1363 24.2882 92.3662 24.0876 92.5391 23.8261L95.8655 18.7853C95.9735 18.9072 96.0973 19.0153 96.2368 19.1057L99.3608 21.1032C99.127 21.1445 98.8952 21.2054 98.6633 21.2841C97.6829 21.6144 96.9068 22.2219 96.3547 23.0869L95.2918 24.7502C95.0206 25.1748 94.9538 25.6722 95.0638 26.1244C94.8634 26.2129 94.6709 26.321 94.4862 26.4468C94.0736 26.728 93.7219 27.0917 93.4468 27.5242C93.1619 27.9705 92.9831 28.4463 92.9124 28.9437C92.8476 29.3998 92.8653 29.8618 92.9655 30.314C93.0696 30.7858 93.2641 31.2282 93.5431 31.6253C93.8221 32.0225 94.1777 32.3606 94.6021 32.6319C95.0108 32.8934 95.4568 33.0704 95.9323 33.1628C96.1622 33.206 96.394 33.2276 96.62 33.2276C96.8793 33.2276 97.1387 33.2001 97.3921 33.1431C97.846 33.0428 98.2723 32.8659 98.6574 32.6142C99.0779 32.341 99.4355 31.9772 99.7184 31.5329C99.9954 31.1004 100.176 30.6305 100.259 30.1351C100.296 29.909 100.312 29.6849 100.308 29.4608C100.758 29.3683 101.172 29.101 101.442 28.6822C101.695 28.7097 101.952 28.7235 102.208 28.7235C102.324 28.7235 102.444 28.7215 102.561 28.7156C103.369 28.6763 104.163 28.519 104.919 28.2516C105.689 27.9803 106.412 27.5871 107.067 27.0858C107.739 26.5707 108.306 25.9534 108.754 25.2495C109.332 24.3471 109.711 23.3681 109.882 22.3418C110.051 21.3273 110.03 20.3188 109.813 19.3417H109.819ZM90.0969 24.4651C90.0556 24.7227 89.9594 24.9684 89.812 25.1984C89.6646 25.4304 89.4858 25.6133 89.2776 25.7469C89.0693 25.8826 88.8414 25.977 88.5938 26.0301C88.4642 26.0576 88.3345 26.0713 88.2028 26.0713C88.083 26.0713 87.9631 26.0595 87.8413 26.0359C87.5859 25.9868 87.3482 25.8924 87.1281 25.7509C86.8963 25.6015 86.7076 25.4245 86.5603 25.2181C86.4149 25.0117 86.3147 24.7836 86.2597 24.5378C86.2047 24.2921 86.1948 24.0444 86.2282 23.7986C86.2636 23.5529 86.354 23.313 86.5013 23.083C86.6487 22.851 86.8314 22.6623 87.0476 22.5168C87.2637 22.3713 87.4936 22.273 87.7372 22.2258C87.8708 22.2003 88.0064 22.1865 88.1419 22.1865C88.2539 22.1865 88.3679 22.1963 88.4818 22.214C88.7353 22.2533 88.977 22.3477 89.2088 22.4952C89.4289 22.6367 89.6136 22.8156 89.7609 23.0319C89.9083 23.2481 90.0124 23.4762 90.0713 23.718C90.1303 23.9598 90.1381 24.2095 90.0969 24.4671V24.4651ZM91.0675 22.851L88.14 20.9794L94.608 10.4671L97.8656 12.5491L91.0695 22.851H91.0675ZM98.5179 29.8481C98.4747 30.1056 98.3804 30.3494 98.233 30.5814C98.0857 30.8134 97.9069 30.9962 97.6986 31.1319C97.4903 31.2675 97.2624 31.3619 97.0168 31.4169C96.8872 31.4464 96.7555 31.4602 96.6239 31.4602C96.506 31.4602 96.3881 31.4484 96.2683 31.4268C96.0148 31.3776 95.7771 31.2832 95.559 31.1437C95.3271 30.9962 95.1405 30.8193 94.9951 30.6128C94.8497 30.4064 94.7514 30.1803 94.6964 29.9346C94.6414 29.6888 94.6336 29.4431 94.667 29.1953C94.7023 28.9496 94.7927 28.7117 94.9401 28.4797C95.0874 28.2477 95.2701 28.059 95.4843 27.9135C95.7004 27.766 95.9283 27.6697 96.172 27.6206C96.3056 27.593 96.4431 27.5793 96.5807 27.5793C96.6907 27.5793 96.8007 27.5871 96.9127 27.6048C97.1642 27.6441 97.4059 27.7366 97.6377 27.884C97.8578 28.0236 98.0405 28.2025 98.1878 28.4188C98.3352 28.635 98.4374 28.8631 98.4943 29.1029C98.5513 29.3428 98.5592 29.5925 98.5179 29.85V29.8481ZM108.143 22.0489C108.01 22.8431 107.719 23.5922 107.269 24.298C106.929 24.8288 106.505 25.2908 105.996 25.6801C105.487 26.0713 104.933 26.3721 104.334 26.5825C103.734 26.7948 103.117 26.9148 102.479 26.9462C102.391 26.9501 102.3 26.9521 102.212 26.9521C101.665 26.9521 101.131 26.8695 100.608 26.7024L99.9561 27.7248L96.785 25.6978L97.8479 24.0326C98.18 23.5116 98.6417 23.1518 99.2331 22.9532C99.5514 22.8451 99.8677 22.792 100.18 22.792C100.449 22.792 100.715 22.8313 100.98 22.91C101.086 22.9454 101.196 22.9788 101.306 23.0083C101.416 23.0378 101.526 23.0712 101.632 23.1066C101.86 23.1754 102.086 23.2088 102.31 23.2088C102.557 23.2088 102.803 23.1675 103.049 23.085C103.514 22.9277 103.886 22.6347 104.159 22.2081C104.328 21.9427 104.436 21.6616 104.479 21.3627C104.522 21.0659 104.512 20.7749 104.45 20.4898C104.387 20.2047 104.271 19.9354 104.1 19.6798C103.929 19.4242 103.711 19.2119 103.446 19.0428C103.059 18.7951 102.654 18.6713 102.231 18.6713C102.086 18.6713 101.939 18.685 101.789 18.7145C101.204 18.8285 100.728 19.1352 100.361 19.6326L97.1897 17.6057C97.6436 16.9195 98.2016 16.3651 98.8618 15.9405C99.5219 15.5178 100.227 15.2268 100.978 15.0715C101.381 14.9869 101.787 14.9457 102.196 14.9457C102.548 14.9457 102.899 14.9771 103.255 15.0381C104.023 15.1717 104.754 15.4588 105.448 15.9031C106.153 16.3533 106.727 16.9117 107.171 17.5781C107.615 18.2446 107.921 18.9563 108.088 19.7152C108.255 20.4721 108.271 21.2487 108.139 22.043L108.143 22.0489ZM101.269 21.1602C101.465 21.0423 101.642 20.885 101.787 20.6904C101.905 20.5291 102.001 20.4839 102.129 20.4603C102.167 20.4525 102.202 20.4485 102.233 20.4485C102.269 20.4485 102.351 20.4485 102.497 20.5409C102.556 20.5783 102.597 20.6196 102.632 20.6707C102.679 20.7415 102.711 20.8103 102.725 20.8771C102.74 20.9518 102.742 21.0265 102.73 21.113C102.726 21.1445 102.715 21.1917 102.669 21.2625C102.607 21.3608 102.558 21.3922 102.485 21.4158C102.422 21.4374 102.365 21.4473 102.312 21.4473C102.265 21.4473 102.214 21.4394 102.159 21.4237C102.033 21.3824 101.905 21.3431 101.776 21.3077C101.695 21.2861 101.618 21.2625 101.544 21.2369C101.524 21.231 101.506 21.2251 101.487 21.2192C101.414 21.1976 101.341 21.1779 101.269 21.1602Z" fill="#FF9300"/>
                    <path d="M8.20687 24.1309C7.8316 24.1309 7.52706 23.8262 7.52706 23.4506C7.52706 19.672 4.45415 16.5991 0.679813 16.5991C0.30454 16.5991 0 16.2943 0 15.9188C0 15.5433 0.30454 15.2386 0.679813 15.2386C4.45611 15.2386 7.52706 12.1637 7.52706 8.38702C7.52706 8.01152 7.8316 7.70678 8.20687 7.70678C8.58214 7.70678 8.88669 8.01152 8.88669 8.38702C8.88669 12.1657 11.9596 15.2386 15.7339 15.2386C16.1092 15.2386 16.4137 15.5433 16.4137 15.9188C16.4137 16.2943 16.1092 16.5991 15.7339 16.5991C11.9576 16.5991 8.88669 19.6739 8.88669 23.4506C8.88669 23.8262 8.58214 24.1309 8.20687 24.1309ZM3.9492 15.9169C5.84914 16.7465 7.37774 18.2761 8.20687 20.1772C9.03601 18.2761 10.5646 16.7465 12.4645 15.9169C10.5646 15.0872 9.03601 13.5576 8.20687 11.6565C7.37774 13.5576 5.84914 15.0872 3.9492 15.9169Z" fill="#FF9300"/>
                    <path d="M14.0835 8.71928C13.885 8.71928 13.7219 8.55807 13.7219 8.35754C13.7219 6.3522 12.0912 4.72041 10.0871 4.72041C9.88866 4.72041 9.72559 4.55919 9.72559 4.35866C9.72559 4.15813 9.8867 3.99691 10.0871 3.99691C12.0912 3.99691 13.7219 2.36512 13.7219 0.359782C13.7219 0.161215 13.8831 -0.00196457 14.0835 -0.00196457C14.2839 -0.00196457 14.445 0.159249 14.445 0.359782C14.445 2.36512 16.0757 3.99691 18.0798 3.99691C18.2783 3.99691 18.4413 4.15813 18.4413 4.35866C18.4413 4.55919 18.2802 4.72041 18.0798 4.72041C16.0757 4.72041 14.445 6.3522 14.445 8.35754C14.445 8.5561 14.2839 8.71928 14.0835 8.71928ZM11.824 4.36063C12.8339 4.80101 13.6453 5.61298 14.0835 6.62154C14.5236 5.61101 15.335 4.79905 16.343 4.36063C15.3331 3.92024 14.5216 3.10827 14.0835 2.09971C13.6434 3.11024 12.8319 3.9222 11.824 4.36063Z" fill="#FF9300"/>
                    <path d="M99.2762 80.0208C98.9481 80.0208 98.6809 79.7534 98.6809 79.4251C98.6809 76.1182 95.9931 73.4287 92.6883 73.4287C92.3602 73.4287 92.093 73.1613 92.093 72.833C92.093 72.5047 92.3602 72.2373 92.6883 72.2373C95.9931 72.2373 98.6809 69.5478 98.6809 66.241C98.6809 65.9126 98.9481 65.6453 99.2762 65.6453C99.6044 65.6453 99.8716 65.9126 99.8716 66.241C99.8716 69.5478 102.559 72.2373 105.864 72.2373C106.192 72.2373 106.459 72.5047 106.459 72.833C106.459 73.1613 106.192 73.4287 105.864 73.4287C102.559 73.4287 99.8716 76.1182 99.8716 79.4251C99.8716 79.7534 99.6044 80.0208 99.2762 80.0208ZM95.551 72.835C97.2152 73.5605 98.5512 74.8993 99.2762 76.5626C100.001 74.8973 101.339 73.5605 103.001 72.835C101.337 72.1095 100.001 70.7707 99.2762 69.1074C98.5512 70.7726 97.2132 72.1095 95.551 72.835Z" fill="#FF9300"/>
                    <path d="M104.418 66.5359C104.243 66.5359 104.102 66.3943 104.102 66.2194C104.102 64.4637 102.675 63.0364 100.921 63.0364C100.746 63.0364 100.604 62.8948 100.604 62.7198C100.604 62.5449 100.746 62.4033 100.921 62.4033C102.675 62.4033 104.102 60.976 104.102 59.2203C104.102 59.0454 104.243 58.9038 104.418 58.9038C104.593 58.9038 104.734 59.0454 104.734 59.2203C104.734 60.976 106.161 62.4033 107.915 62.4033C108.09 62.4033 108.232 62.5449 108.232 62.7198C108.232 62.8948 108.09 63.0364 107.915 63.0364C106.161 63.0364 104.734 64.4637 104.734 66.2194C104.734 66.3943 104.593 66.5359 104.418 66.5359ZM102.442 62.7218C103.324 63.1071 104.035 63.8169 104.42 64.7016C104.805 63.8188 105.514 63.1071 106.399 62.7218C105.516 62.3365 104.805 61.6267 104.42 60.742C104.035 61.6248 103.326 62.3365 102.442 62.7218Z" fill="#FF9300"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_1571_3803">
                    <rect width="110" height="98" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>
            </i>

            <h2 class="shoping-cart__aside--h2 h2">AUN NO HAY PRODUCTOS EN EL CARRITO</h2>
            <p class="shoping-cart__aside--P">Sigue explorando nuestro sitio y agrega los productos que deseas a tu carrito para así completar tu compra.</p>
        </div>
        `;

    }
}

function renderProductsUI(products) {
    const shoppingList = document.querySelector('#productList');
    shoppingList.innerHTML = '';

    products.forEach(product => {
        const li = document.createElement('li');
        li.classList.add('shoping-cart__aside--li');

        li.innerHTML = `
        <div class="shoping-cart__aside--content">
            <img src="${product.image}" alt="${product.name}">
            <div class="shoping-cart__aside--info">
                <h3 class="shoping-cart__aside--title">${product.name}</h3>
                <span class="shoping-cart__aside--price">${product.price}</span>
            </div>
        </div>
        <button class="shoping-cart__aside--delete" value="${product.id}">
            <i>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24"
                    height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#FF9300" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M4 7l16 0" />
                    <path d="M10 11l0 6" />
                    <path d="M14 11l0 6" />
                    <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                    <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                </svg>
            </i>
        </button>
        `;

        shoppingList.appendChild(li);

        let buttonsDelete = shoppingList.querySelectorAll('button');
        buttonsDelete.forEach(button => {
            button.addEventListener('click', () => {
                let idProduct = button.value;
                idProduct = parseInt(idProduct, 10);
                deleteProduct(idProduct);
            });
        });
    });
}
